"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[502],{27005:function(Z,I,t){t.d(I,{pl:function(){return v},aY:function(){return B},q5:function(){return g}});var e=t(32735),r=t(19565),f=t(86209),p=t(97889);const O={data:[],isLoading:!0};var T=(i,n)=>(0,p.ZP)(i,s=>{switch(n.type){case"GET_DATA_SUCCEEDED":{s.data=n.data,s.isLoading=!1;break}case"GET_DATA_ERROR":{s.isLoading=!1;break}default:return s}}),v=({ssoEnabled:i})=>{const[n,s]=(0,e.useReducer)(T,O),l=(0,r.lm)(),{get:c}=(0,r.kY)();return(0,e.useEffect)(()=>{(async()=>{try{if(!i){s({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:o}=await c((0,f.IF)("providers"));s({type:"GET_DATA_SUCCEEDED",data:o})}catch(o){console.error(o),s({type:"GET_DATA_ERROR"}),l({type:"warning",message:{id:"notification.error"}})}})()},[c,i,l]),n},M=t(36866),C=t.n(M),h=t(67879),P=t(53038),R=t(20108),S=t(15062),u=t(30305);function U(){const i=(0,S.v9)(u._),{get:n}=(0,r.kY)(),{isLoading:s,allowedActions:{canRead:l,canCreate:c,canUpdate:m,canDelete:o}}=(0,r.ss)(i.settings.users),L=l&&c&&m&&o,{data:a,isError:A,isLoading:W}=(0,R.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:K}}=await n("/admin/license-limit-information");return K},{enabled:!s&&L}),d=a??{},H=e.useCallback(K=>(d?.features??[]).find(x=>x.name===K)?.options??{},[d?.features]);return{license:d,getFeature:H,isError:A,isLoading:W}}var g=U;const E="strapi-notification-seat-limit",D="https://cloud.strapi.io/profile/billing",y="https://strapi.io/billing/request-seats";var B=()=>{const{formatMessage:i}=(0,h.Z)();let{license:n,isError:s,isLoading:l}=g();const c=(0,r.lm)(),{pathname:m}=(0,P.TH)(),{enforcementUserCount:o,permittedSeats:L,licenseLimitStatus:a,isHostedOnStrapiCloud:A}=n;(0,e.useEffect)(()=>{if(s||l)return;const W=!C()(L)&&!window.sessionStorage.getItem(`${E}-${m}`)&&(a==="AT_LIMIT"||a==="OVER_LIMIT");let d;a==="OVER_LIMIT"?d="warning":a==="AT_LIMIT"&&(d="softWarning"),W&&c({type:d,message:i({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:a}),title:i({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:a,enforcementUserCount:o,permittedSeats:L}),link:{url:A?D:y,label:i({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:A})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${E}-${m}`,!0)}})},[c,n,m,i,l,L,a,o,A,s])}},50502:function(Z,I,t){t.r(I),t.d(I,{AdminSeatInfoEE:function(){return S}});var e=t(32735),r=t(5803),f=t(49372),p=t(87933),O=t(63919),N=t(99140),T=t(41502),_=t(19565),v=t(69932),M=t(47361),C=t(67879),h=t(27005);const P="https://cloud.strapi.io/profile/billing",R="https://strapi.io/billing/request-seats",S=()=>{const{formatMessage:u}=(0,C.Z)(),{license:{licenseLimitStatus:U,enforcementUserCount:g,permittedSeats:E,isHostedOnStrapiCloud:D},isError:y,isLoading:G}=(0,h.q5)();return y||G||!E?null:e.createElement(r.P,{col:6,s:12},e.createElement(f.Z,{variant:"sigma",textColor:"neutral600"},u({id:"Settings.application.admin-seats",defaultMessage:"Admin seats"})),e.createElement(p.k,{gap:2},e.createElement(p.k,null,e.createElement(f.Z,{as:"p"},u({id:"Settings.application.ee.admin-seats.count",defaultMessage:"<text>{enforcementUserCount}</text>/{permittedSeats}"},{permittedSeats:E,enforcementUserCount:g,text:B=>e.createElement(f.Z,{fontWeight:"semiBold",textColor:g>E?"danger500":null},B)}))),U==="OVER_LIMIT"&&e.createElement(O.u,{description:u({id:"Settings.application.ee.admin-seats.at-limit-tooltip",defaultMessage:"At limit: add seats to invite more users"})},e.createElement(N.J,{width:`${(0,_.Q1)(14)}rem`,height:`${(0,_.Q1)(14)}rem`,color:"danger500",as:v.Z}))),e.createElement(T.r,{href:D?P:R,isExternal:!0,endIcon:e.createElement(M.Z,null)},u({id:"Settings.application.ee.admin-seats.add-seats",defaultMessage:"{isHostedOnStrapiCloud, select, true {Add seats} other {Contact sales}}"},{isHostedOnStrapiCloud:D})))}}}]);
