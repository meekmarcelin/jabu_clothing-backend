"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[2379],{27005:function(W,L,t){t.d(L,{pl:function(){return I},aY:function(){return G},q5:function(){return E}});var i=t(32735),r=t(19565),v=t(86209),T=t(97889);const M={data:[],isLoading:!0};var O=(s,n)=>(0,T.ZP)(s,e=>{switch(n.type){case"GET_DATA_SUCCEEDED":{e.data=n.data,e.isLoading=!1;break}case"GET_DATA_ERROR":{e.isLoading=!1;break}default:return e}}),I=({ssoEnabled:s})=>{const[n,e]=(0,i.useReducer)(O,M),l=(0,r.lm)(),{get:c}=(0,r.kY)();return(0,i.useEffect)(()=>{(async()=>{try{if(!s){e({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:o}=await c((0,v.IF)("providers"));e({type:"GET_DATA_SUCCEEDED",data:o})}catch(o){console.error(o),e({type:"GET_DATA_ERROR"}),l({type:"warning",message:{id:"notification.error"}})}})()},[c,s,l]),n},C=t(36866),P=t.n(C),p=t(67879),h=t(53038),g=t(20108),_=t(15062),A=t(30305);function R(){const s=(0,_.v9)(A._),{get:n}=(0,r.kY)(),{isLoading:e,allowedActions:{canRead:l,canCreate:c,canUpdate:u,canDelete:o}}=(0,r.ss)(s.settings.users),m=l&&c&&u&&o,{data:a,isError:f,isLoading:y}=(0,g.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:U}}=await n("/admin/license-limit-information");return U},{enabled:!e&&m}),d=a??{},$=i.useCallback(U=>(d?.features??[]).find(Z=>Z.name===U)?.options??{},[d?.features]);return{license:d,getFeature:$,isError:f,isLoading:y}}var E=R;const D="strapi-notification-seat-limit",S="https://cloud.strapi.io/profile/billing",N="https://strapi.io/billing/request-seats";var G=()=>{const{formatMessage:s}=(0,p.Z)();let{license:n,isError:e,isLoading:l}=E();const c=(0,r.lm)(),{pathname:u}=(0,h.TH)(),{enforcementUserCount:o,permittedSeats:m,licenseLimitStatus:a,isHostedOnStrapiCloud:f}=n;(0,i.useEffect)(()=>{if(e||l)return;const y=!P()(m)&&!window.sessionStorage.getItem(`${D}-${u}`)&&(a==="AT_LIMIT"||a==="OVER_LIMIT");let d;a==="OVER_LIMIT"?d="warning":a==="AT_LIMIT"&&(d="softWarning"),y&&c({type:d,message:s({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:a}),title:s({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:a,enforcementUserCount:o,permittedSeats:m}),link:{url:f?S:N,label:s({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:f})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${D}-${u}`,!0)}})},[c,n,u,s,l,m,a,o,f,e])}},42379:function(W,L,t){t.r(L),t.d(L,{CreateActionEE:function(){return g}});var i=t(32735),r=t(87933),v=t(63919),T=t(99140),M=t(41415),B=t(69932),O=t(7961),K=t(36866),I=t.n(K),C=t(60216),P=t.n(C),p=t(67879),h=t(27005);const g=({onClick:_})=>{const{formatMessage:A}=(0,p.Z)(),{license:{permittedSeats:R,shouldStopCreate:E},isError:D,isLoading:S}=(0,h.q5)();return D||S?null:i.createElement(r.k,{gap:2},!I()(R)&&E&&i.createElement(v.u,{description:A({id:"Settings.application.admin-seats.at-limit-tooltip",defaultMessage:"At limit: add seats to invite more users"}),position:"left"},i.createElement(T.J,{width:`${14/16}rem`,height:`${14/16}rem`,color:"danger500",as:B.Z})),i.createElement(M.z,{"data-testid":"create-user-button",onClick:_,startIcon:i.createElement(O.Z,null),size:"S",disabled:E},A({id:"Settings.permissions.users.create",defaultMessage:"Invite new user"})))};g.propTypes={onClick:P().func.isRequired}}}]);
